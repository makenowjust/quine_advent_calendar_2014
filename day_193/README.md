# Day 193

この記事はQuine Advent Calendar 2014の193日目です。え、終わったんじゃなかったのかって？　あれは毎日更新するのを終わりにしただけなんじゃないかと思います。

今日はREXXでQuineを書きました。REXXはIBMが開発した汎用のスクリプト言語です。ANSIの規格もあるそうです。なんで今まで書いてなかったんだろう、ってボクが思う程度には有名な言語だと思います。

1980年頃にIBMのメインフレーム向けに開発されて、その後MS-DOSやAmigaなどに移植されて広まったようです。現在ではWindows用、Linux用の処理系もいくつかあり、その中でも今回はオブジェクト指向に拡張された[ooREXX]を利用しました。ただし、オブジェクト指向な機能はまったく使っていません。

言語としての印象は、テキスト処理のしやすいBASICといったものでしょうか。構文はそれなりに高級なのですが、サブルーチンの定義がラベルっぽかったりと、BASICっぽさがどことなくあります。後述する`sourceline`関数もBASICの`LIST`文が由来なのではないかな。

さて、今回は二種類のQuineを書きました。一つは通常のアプローチのQuineで、もう一つは`sourceline`関数を用いた一行のQuineです。

通常のアプローチのQuineではエスケープ文字を避けた文字列を、`d2c`関数（数値から文字にする関数）で作ったダブルクオートと結合して出力しています。普通です。

で、それを書いたあとに`sourceline`関数（引数として渡した行のソースコードを返す関数）を見付けて、それを使った一行のQuineを書きました。

やっぱQuine書くの楽しいなぁ。

```console
$ diff quine.rex <(rexx quine.rexx)
$ diff quine.1line.rex <(rexx quine.1line.rex)
```


[ooREXX]: http://www.oorexx.org/
