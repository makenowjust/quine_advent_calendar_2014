# Day 267

この記事はQuine Advent Calendar 2014の267日目です。超ひさしぶりです。ひさしぶりすぎてどうやって書けばいいのか完全に忘れましたがてきとーにいきたいと思います。

今日は[Pony][]というプログラミング言語でQuineを書きました。Ponyはオブジェクト指向でアクターモデルで、パフォーマンスがいい感じのプログラミング言語です。ErlangとかElixirの系譜に近いものを感じますが、独自にコンパイラとランタイムを実装しています。型安全だったり、メモリ安全だったりするみたいです。Rustっぽい気がしました。そこら辺をきちんと調べると面白いのでしょうが、時間がなかったので暇なときに調べます。

Quineを書く上で面白かったのは、24行目の

```pony
      if try ls(3) == l else false end then
```

とかでしょうか。Everything is an expressionとかいうので動くんだろうなとは思ったのですが、案の定動きました。なぜここに`try ~ else ~ end`がいるのかというと、`ls(3)`がOut of Indexする可能性があるので、それに対処するためです。対処しないとそもそもコンパイルできません。Ponyは例外を`error`という構文で投げますが、`error`は例外の情報を伝えられません。なので、どちらかと言えばScalaの`Option`とかHaskellの`Either`とか、そういったものに近いのだと思います。主にメモリエラーで投げて、それ以外の例外はアクターを介したメッセージングにするとか、そういうモデルが必要なのでしょう。

[Pony]: http://www.ponylang.org/
